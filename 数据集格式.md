# 1. Alpaca

`Alpaca` 最初是斯坦福大学于 2023 年发布的 **52k 条指令微调数据集**，由 `OpenAI` 的 `text-davinci-003` 模型生成，旨在通过指令跟随（`Instruction Following`）任务优化大语言模型（如 `LLaMA`）的性能。

后续随着社区的发展，Alpaca 的 JSON 结构逐渐被抽象为一种 **通用数据格式**，并且扩展了一些字段如 `system`（系统提示）和 `history`（历史对话），支持多轮交互任务。适用于多种微调场景，很多主流框架（如 LLaMA-Factory、DeepSpeed）都可以直接加载 `Alpaca` 格式的数据集。

这里我们参考 `LLaMA-Factory` 给出的两种在不同微调场景中 `Alpaca` 格式的数据案例：

**Alpaca 格式的指令微调数据集**：

![image-20250714121356530](数据集格式.assets/image-20250714121356530.png)

**Alpaca 格式的领域适配微调数据集**：

![image-20250714121408198](数据集格式.assets/image-20250714121408198.png)

**Alpaca 格式的偏好数据集**：

![image-20250714121419714](数据集格式.assets/image-20250714121419714.png)

# 2. ShareGPT

**ShareGPT** 最早是一种数据格式标准，由社区设计用于规范多轮对话和工具调用场景的模型训练数据存储方式。其核心目标是通过结构化字段（如 `conversations` 列表、`tools` 工具描述）支持复杂交互（如用户提问 → 工具调用 → 结果整合）。

随着格式的普及，社区基于 `ShareGPT` 格式构建了多个具体的数据集，这类数据集被称为 "ShareGPT 格式数据集"。

**ShareGPT 格式的指令微调数据集**：

![image-20250714121432844](数据集格式.assets/image-20250714121432844.png)

**ShareGPT 格式的偏好数据集**：

![image-20250714121443146](数据集格式.assets/image-20250714121443146.png)

**ShareGPT 格式的多模态数据集**：

![image-20250714121453232](数据集格式.assets/image-20250714121453232.png)

**特殊的 ShareGPT 格式数据集：OpenAI 格式**

![image-20250714121502425](数据集格式.assets/image-20250714121502425.png)

# 3. 格式对比

下面是两种数据集格式的详细对比，大家可以根据自己的实际需求场景选择合适的格式：

| 对比维度       | Alpaca 格式                                                  | ShareGPT 格式                                                |
| :------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| 核心设计目标   | 单轮指令驱动任务（如问答、翻译、摘要）                       | 多轮对话与工具调用（如聊天机器人、API 交互）                 |
| 数据结构       | 以 `instruction`、`input`、`output` 为主体的 JSON 对象       | 以 `conversations` 列表为核心的多角色对话链（human/gpt/function_call/observation） |
| 对话历史处理   | 通过 `history` 字段记录历史对话（格式：`[["指令", "回答"], ...]`） | 通过 `conversations` 列表顺序自然体现多轮对话（角色交替出现） |
| 角色与交互逻辑 | 仅区分用户指令和模型输出，无显式角色标签                     | 支持多种角色标签（如 `human`、`gpt`、`function_call`），强制奇偶位置规则 |
| 工具调用支持   | 不原生支持工具调用，需通过 `input` 或指令隐式描述            | 通过 `function_call` 和 `observation` 显式实现工具调用，支持外部 API 集成 |
| 典型应用场景   | - 指令响应（如 Alpaca-7B） - 领域知识问答 - 文本结构化生成   | - 多轮对话（如 Vicuna） - 客服系统 - 需实时数据查询的交互（如天气、计算） |
| 优势           | - 结构简洁，任务导向清晰 - 适合快速构建单轮任务数据集        | - 支持复杂对话流与外部工具扩展 - 更贴近真实人机交互场景      |
| 局限           | - 多轮对话需手动拼接 `history` - 缺乏动态工具交互能力        | - 数据格式更复杂 - 需严格遵循角色位置规则                    |